"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,o=require("immer"),r=e(o),n=require("react"),a=e(n);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function i(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return d(e,void 0);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?d(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}!function(e){e.OpenModal="OpenModal",e.UpdateModal="UpdateModal",e.CloseModal="CloseModal",e.CloseAllModals="CloseAllModals",e.RemoveModal="RemoveModal",e.RegisterModal="RegisterModal",e.LazyModalLoaded="LazyModalLoaded",e.LoadLazyModal="LoadLazyModal"}(t||(t={}));var u=new Map,s=r((function(e,o){var r,n=(null!=(r=o.payload)?r:{}).id,a=(Array.from(e.keys()),e.has(n)),d=e.get(n);switch(o.type){case t.RegisterModal:return a||e.set(n,l({},o.payload,{id:n,props:{}})),e;case t.LoadLazyModal:return d&&(d.loading=!0,d.loadFailed=!1),e;default:return e}})),c=function(e){var t=e.render;return(e.opened||e.renderIfClosed)&&t?a.createElement(a.Fragment,null,t(e.modalProps)):null},f=function(){var e=y(),o=e.state,r=e.dispatch,l=n.useMemo((function(){for(var e,t=[],r=i(o.values());!(e=r()).done;){var a=e.value;a.component&&t.push(n.createElement(c,{render:a.component,modalProps:{},renderIfClosed:!1,opened:!1,key:a.id}))}return t}),[o]);return n.useEffect((function(){for(var e,n=function(){var o=e.value;if(o.isLazy&&!o.loaded){r(t.LoadLazyModal,{id:o.id});try{var n=o.loader;null==n||n().then((function(e){console.log(e),r(t.LazyModalLoaded,{id:o.id})}))}catch(e){}}},a=i(o.values());!(e=a()).done;)n()}),[o]),a.createElement(a.Fragment,null,l)},p=n.createContext({state:u,dispatch:function(){},defaultProps:{}});p.displayName="RMBH_Context";var y=function(){return n.useContext(p)};o.enableAllPlugins(),exports.ModalProvider=function(e){var t=e.children,o=e.defaultProps,r=void 0===o?{}:o,l=n.useReducer(s,u),d=l[0],i=l[1],c=n.useCallback((function(e,t){i({type:e,payload:t})}),[]);return a.createElement(p.Provider,{value:{state:d,defaultProps:r,dispatch:c}},a.createElement(a.Fragment,null,a.createElement(f,null),t))},exports.useCloseModal=function(){var e=y().dispatch;return{close:function(o){return e(t.CloseModal,{modalId:o})},closeAll:function(){return e(t.CloseAllModals)}}},exports.useOpenModal=function(){n.useState(!1);var e=y().state;return function(t,o){throw e.get(t),new TypeError("modalId("+t+") doesn't exist, cannot find corresponding 'modal' component, please check this")}},exports.useRegisterModal=function(){return function(e){var o=y(),r=o.dispatch;n.useEffect((function(){Object.keys(e).forEach((function(o){var n=e[o],a={id:o,isLazy:n.isLazy,component:n.component,loader:n.loader};a.isLazy&&(a.loaded=!1,a.loading=!1,a.loadFailed=!1),r(t.RegisterModal,a)}))}),[e,o.state])}},exports.useUpdateModal=function(){return y(),function(){}};
//# sourceMappingURL=react-modal-better-hooks.cjs.production.min.js.map
